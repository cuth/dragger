/*  Dragger
 *  version: 1.2.1
 *  https://github.com/cuth/dragger
 *  @preserve
 */
define(function(){"use strict";var t={start:null,drag:null,stop:null,initX:0,initY:0,allowVerticalScrolling:!1,allowHorizontalScrolling:!1},i={minX:null,maxX:null,minY:null,maxY:null},n=function(t){return"object"!=typeof t?t:(Array.prototype.slice.call(arguments,1).forEach(function(i){for(var n in i)t[n]=i[n]}),t)},s=function(t){n(this.bounds,t)},o=function(t){n(this.handle,t)},e=function(){return 0!==this.dragStart.diffX||0!==this.dragStart.diffY},l=function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},r=function(t,i){var n,s,o,e;return n=t.x-this.dragStart.x,s=t.y-this.dragStart.y,i&&n===this.dragStart.diffX&&s===this.dragStart.diffY?!1:(this.dragStart.diffX=n,this.dragStart.diffY=s,o=n+this.handle.x,e=s+this.handle.y,"number"==typeof this.bounds.minX&&(o=Math.max(o,this.bounds.minX)),"number"==typeof this.bounds.maxX&&(o=Math.min(o,this.bounds.maxX)),"number"==typeof this.bounds.minY&&(e=Math.max(e,this.bounds.minY)),"number"==typeof this.bounds.maxY&&(e=Math.min(e,this.bounds.maxY)),{x:o,y:e})},a=function(t){var i=l();this.dragStart={x:t.x,y:t.y,diffX:0,diffY:0,scrollX:i.x,scrollY:i.y},"function"==typeof this.opts.start&&this.opts.start.call(this,this.handle)},h=function(t){var i=r.call(this,t,!0);i&&"function"==typeof this.opts.drag&&this.opts.drag.call(this,i)},c=function(t){this.handle=r.call(this,t,!1);var i=e.call(this)&&!this.isScrolling;"function"==typeof this.opts.stop&&this.opts.stop.call(this,this.handle,i),this.isDragging=!1},d=function(t){document.onselectstart=function(){return!1},this.isDragging=!0,a.call(this,{x:t.clientX,y:t.clientY})},u=function(t){this.isDragging&&h.call(this,{x:t.clientX,y:t.clientY})},f=function(t){document.onselectstart=null,this.isDragging&&c.call(this,{x:t.clientX,y:t.clientY})},g=function(t){this.isDragging=!1,a.call(this,{x:t.touches[0].clientX,y:t.touches[0].clientY})},p=function(){var t=l();return this.opts.allowVerticalScrolling&&t.y!==this.dragStart.scrollY?!0:this.opts.allowHorizontalScrolling&&t.x!==this.dragStart.scrollX?!0:!1},m=function(t){return!this.opts.allowVerticalScrolling&&Math.abs(t.y-this.dragStart.y)>10?!0:!this.opts.allowHorizontalScrolling&&Math.abs(t.x-this.dragStart.x)>10?!0:!1},y=function(t){if(this.isScrolling)return!0;var i={x:t.touches[0].clientX,y:t.touches[0].clientY};if(!this.isDragging){if(p.call(this))return this.isScrolling=!0,!0;if(!m.call(this,i))return!0;this.isDragging=!0}t.preventDefault(),h.call(this,i)},b=function(t){var i={x:this.isScrolling?this.dragStart.x:t.changedTouches[0].clientX,y:this.isScrolling?this.dragStart.y:t.changedTouches[0].clientY};c.call(this,i),this.isScrolling=!1},S=function(t){t.preventDefault()},x=function(t){e.call(this)&&t.preventDefault()},v=function(){this.el.addEventListener("mousedown",d.bind(this)),document.addEventListener("mousemove",u.bind(this)),document.addEventListener("mouseup",f.bind(this)),this.el.addEventListener("touchstart",g.bind(this)),this.el.addEventListener("touchmove",y.bind(this)),this.el.addEventListener("touchend",b.bind(this)),this.el.addEventListener("dragstart",S.bind(this)),this.el.addEventListener("click",x.bind(this))},X=function(s,o){return this.el="string"==typeof s?document.querySelector(s):s,"object"!=typeof this.el?!1:(this.opts=n({},t,o),this.bounds=n({},i),this.handle={x:this.opts.initX,y:this.opts.initY},this.dragStart={x:0,y:0,diffX:0,diffY:0,scrollX:0,scrollY:0},this.isDragging=!1,this.isScrolling=!1,v.call(this),!0)},Y=function(t,i){this.result=X.call(this,t,i)};return Y.prototype.setBounds=s,Y.prototype.setPosition=o,Y.prototype.hasDragged=e,Y});